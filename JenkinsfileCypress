pipeline {
	agent {
    // this image provides everything needed to run Cypress
    docker {
      image 'cypress/base:16.18.1'
    }
  }
	tools {nodejs "Node16"}
	environment {
   		ELECTRON_RUN_AS_NODE=1
   	}
	
	stages {
    	stage('Dependencies') {
        	steps {
            	sh 'npm ci --verbose'
           	}
       	}
       
	   	stage('e2e Tests') {
	        steps {
    	        sh 'npx cypress run --browser chrome --headless'
            }
        }
             
		stage('Deploy') {
        	steps {
            	echo 'Deploying....'
           	}
       	}
   	}
}
